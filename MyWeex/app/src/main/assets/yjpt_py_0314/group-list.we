<template>
    <div>
        <!--班级群-->
        <div class="group_list" repeat="classGroup" if="classGroup.length>0">
            <img src='{{images.mainGroup}}' class="pic_thumb" />
            <div class="group_cont">
                <div class="group">
                    <text class="group_name">{{name}}班群</text>
                    <text class="group_time">{{lastUpdateTime}}</text>
                </div>
                <div class="group">
                    <text class="group_txt">{{lastMember}}：{{lastMsg}}</text>
                    <text class="main_lower_size" if="hasNewMsg">{{msgNumber}}</text>
                </div>
            </div>
        </div>

        <!--讨论组-->
        <div class="group_list" repeat="otherGroup" if="otherGroup.length>0">
            <img src='{{images.otherGroup}}' class="pic_thumb" />
            <div class="group_cont">
                <div class="group">
                    <text class="group_name">{{name}}</text>
                    <text class="group_time">{{lastUpdateTime}}</text>
                </div>
                <div class="group">
                    <text class="group_txt">{{lastMember}}：{{lastMsg}}</text>
                    <text class="main_lower_size" if="hasNewMsg">{{msgNumber}}</text>
                </div>
            </div>
        </div>


    </div>
</template>
<style>
      .group_list{border-bottom-width:  1px;border-bottom-style: solid;border-bottom-color: #f4f1f1;padding-top: 15;padding-bottom: 15;display: flex;flex-direction: row;}  
      .pic_thumb { width: 110; height: 110; margin-right:25; margin-left: 25;} 

      .group{display: flex;flex-direction: row;justify-content: space-between;padding-right: 25;}
      .group_cont{flex: 3;}
      .group_name{font-size: 36px;line-height: 50px;width: 480;}
      .group_txt,.group_time{font-size: 32px;color: #b8b8b8;line-height: 45px;}
      .group_txt{text-overflow:ellipsis;lines:1;width: 500;}
      .main_lower_size{ width:40; height:40; line-height:35; color:#ffffff; font-size:26; text-align: center; background-color:#F74C31;  border-radius:25; margin-top: 7; }
</style>
<script>
     require('weex-components');
    var Utils = require('./javascript/Utils');
    var storage = require('@weex-module/storage');
    var modal = require('@weex-module/modal');
    module.exports = {
        data: {
            dir: 'yjpt',
            isShowMenu:false,          
            images:{
                mainGroup:'yjpt/images/Photo_04.png',
                otherGroup:'yjpt/images/Photo_05.png',
            },           
            classGroup:[], 
            otherGroup:[]
        },
        created: function() {
            var self = this;         
            Utils.changeImg(this.images,['mainGroup','otherGroup']);

            //班级群
            storage.getItem('classGroup',function(e){       
                // console.log(e.data);             
                if(e.data){
                    self.classGroup = JSON.parse(e.data);
                }
            });

            //讨论组
            storage.getItem('otherGroup',function(e){
                if(e.data){
                    self.otherGroup = JSON.parse(e.data);
                }
            });
                
        },
        methods: {
        }
    }
</script>