<template>
    <!--<wxc-navbar></wxc-navbar> -->
   <wxc-tabbar class="tabbar" tab-items={{tabItems}}></wxc-tabbar>
</template>

<style>
  .content {
    color: #353535;
    background-color: #666666;
  }
  .tabbar { background-color: #ffffff; }
</style>
<script>

  
  require('weex-components');
  var Utils = require('./javascript/Utils');
  var modal = require('@weex-module/modal');
  var storage = require('@weex-module/storage');
  var globalEvent = require('@weex-module/globalEvent');

  globalEvent.addEventListener("getGroupList", function (e) {
      modal.alert({
          message:'getGroupList'
      },function(){});
  });
  module.exports = {
    data: {
      dir: 'yjpt',
      tabItems: [
        {
          index: 0,
          title: "首 页",
          titleColor: 0x0,
          backgroundColor:'',
          icon: "",
          image: Utils.ip +"yjpt/images/home-off.png",
          selectedImage: Utils.ip +"yjpt/images/home.png",
          src: "main.js",
          visibility: "visible",
        },
        {
          index: 1,
          title: "亲子圈",
          titleColor: 0x0,
          backgroundColor:'',
          icon:"",
          image: Utils.ip +"yjpt/images/huilv-off.png",
          selectedImage: Utils.ip +"yjpt/images/huilv.png",
          src: "qzq.js",
          visibility: "hidden"
        },
        {
          index: 2,
          title: "我的",
          titleColor: 0x0,
          backgroundColor:'',
          icon:"",
          image: Utils.ip +"yjpt/images/wo-off.png",
          selectedImage: Utils.ip +"yjpt/images/wo.png",
          src: "wd.js",
          visibility: "hidden",
        }
      ],
    },
    created: function () {
      var that = this;
      var vm = this;
      vm.$on('tabBar.onClick',function(e){
        var detail= e.detail;
        nativeLog('tabBar.onClick ' + detail.index);
      });
      var bundleUrl = this.$getConfig().bundleUrl;

      var nativeBase;
      var isAndroidAssets = bundleUrl.indexOf('file://assets/') >= 0;

      var isiOSAssets = bundleUrl.indexOf('file:///') >= 0;

      if (isAndroidAssets) {
        nativeBase = 'file://assets/';
      } else if (isiOSAssets) {
        // file:///var/mobile/Containers/Bundle/Application/{id}/WeexDemo.app/
        // file:///Users/{user}/Library/Developer/CoreSimulator/Devices/{id}/data/Containers/Bundle/Application/{id}/WeexDemo.app/
        nativeBase = bundleUrl.substring(0, bundleUrl.lastIndexOf('/') + 1);
      } else {
        var host = 'localhost:12680';
        var matches = /\/\/([^\/]+?)\//.exec(this.$getConfig().bundleUrl);
        if (matches && matches.length >= 2) {
          host = matches[1];
        }
        nativeBase = 'http://' + host + '/' + this.dir + '/weex_jzd/';
      }
      var h5Base = './' + this.dir + '/weex_jzd/';
      // in Native
      var base = nativeBase;
      if (typeof window === 'object') {
        // in Browser or WebView
        base = h5Base;
      }
      for(var i = 0; i < this.tabItems.length; i++) {
          var tabItem = that.tabItems[i];
          tabItem.src = base + tabItem.src;
      }

      // storage.getItem('tabItemIndex',function(e){
      //     if(e.data!='undefined'){
      //         console.log(e.data);
      //         for(var i=0;i<that.tabItems.length;i++){
      //             if(i==e.data){
      //                 that.tabItems[i].visibility = 'visible';
      //             }else{
      //                 that.tabItems[i].visibility = 'hidden'; 
      //             }
      //         }

      //     }
      // });

    },
    methods: {

      
    }
  }
</script>
